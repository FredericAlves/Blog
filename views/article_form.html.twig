{% extends 'layout.html.twig' %}

{% set adminMenu = true %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <h2 class="text-center">{{ block('title') }}</h2>
    {% for flashMessage in app.session.flashbag.get('success') %}
        <div class="alert alert-success">
            {{ flashMessage }}
        </div>
    {% endfor %}
    <div class="well">

    <form method="post" action="/admin/article/add" onsubmit="return valider()" name="formSaisie">

        <div class="row">

            <div class="form-group">
                <div class="col-sm-6">
                    <label for="title">Titre :</label>
                    <input type="text" name="title" id=$title >
                    <p></p>
                </div>
            </div>
            <p></p>

            <div class="form-group">
                <div class="col-sm-12">
                <textarea type="textarea" name="content" id=$content ></textarea>

                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-5 col-sm-4">
                    <p></p>
                    <input type="submit" class="btn btn-primary" value="Publier l'article" formnovalidate="true"/>
                </div>
            </div>
        </div>
    </form>
    </div>
    {% block javascript %}
        {{ parent() }}
    <script type="text/javascript" src="{{ asset('/lib/tinymce/tinymce.min.js') }}"></script>
    <script type="text/javascript">
        tinymce.init({
            selector: 'textarea',
            height: 500,
            theme: 'modern',
            plugins: [
                'advlist autolink lists link image charmap print preview hr anchor pagebreak',
                'searchreplace wordcount visualblocks visualchars code fullscreen',
                'insertdatetime media nonbreaking save table contextmenu directionality',
                'emoticons template paste textcolor colorpicker textpattern imagetools codesample toc help'
            ],
            toolbar1: 'undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',
            toolbar2: 'print preview media | forecolor backcolor emoticons | codesample help',
            image_advtab: true,
            templates: [
                { title: 'Test template 1', content: 'Test 1' },
                { title: 'Test template 2', content: 'Test 2' }
            ],
            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tinymce.com/css/codepen.min.css'
            ]
        });
    </script>
    <script type="text/javascript">
        function valider() {
            // if the field title or content is empty
            if(!document.formSaisie.title.value || !tinyMCE.get('$content').getContent()){
                // we display a message
                swal({
                    title: "Veuillez Saisir un titre et un contenu Ã  votre article",
                    text: "",
                    type: "warning",
                    confirmButtonText: "Ok"
                });
                return false;

            }
            else {
                // it's ok, we can send the form
                return true;


            }

        }




    </script>
    {% endblock %}

{% endblock %}